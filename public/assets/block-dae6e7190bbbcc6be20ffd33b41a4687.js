!function(e){function o(o){if(e.block.settings.inited)return!0;e.block.settings.inited=!0,e(document).trigger("init.block"),n();var l=e.block.settings.imageTypes.join("|");e.block.settings.imageTypesRegexp=new RegExp(".("+l+")$","i"),o&&e.extend(e.block.settings,o),e("body").append(e.block.settings.blockHtml);var c=[new Image,new Image];c[0].src=e.block.settings.closeImage,c[1].src=e.block.settings.loadingImage,e("#block").find(".b:first, .bl").each(function(){c.push(new Image),c.slice(-1).src=e(this).css("background-image").replace(/url\((.+)\)/,"$1")}),e("#block .close").click(e.block.close),e("#block .close_image").attr("src",e.block.settings.closeImage)}function l(){var e,o;return self.pageYOffset?(o=self.pageYOffset,e=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(o=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(o=document.body.scrollTop,e=document.body.scrollLeft),new Array(e,o)}function c(){var e;return self.innerHeight?e=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight),e}function n(){var o=e.block.settings;o.loadingImage=o.loading_image||o.loadingImage,o.closeImage=o.close_image||o.closeImage,o.imageTypes=o.image_types||o.imageTypes,o.blockHtml=o.block_html||o.blockHtml}function t(o,l){if(o.match(/#/)){var c=window.location.href.split("#")[0],n=o.replace(c,"");if("#"==n)return;e.block.reveal(e(n).html(),l)}else o.match(e.block.settings.imageTypesRegexp)?i(o,l):s(o,l)}function i(o,l){var c=new Image;c.onload=function(){e.block.reveal('<div class="image"><img src="'+c.src+'" /></div>',l)},c.src=o}function s(o,l){e.get(o,function(o){e.block.reveal(o,l)})}function a(){return 0==e.block.settings.overlay||null===e.block.settings.opacity}function d(){return a()?void 0:(0==e("#block_overlay").length&&e("body").append('<div id="block_overlay" class="block_hide"></div>'),e("#block_overlay").hide().addClass("block_overlayBG").css("opacity",e.block.settings.opacity).fadeIn(200),!1)}function r(){return a()?void 0:(e("#block_overlay").fadeOut(200,function(){e("#block_overlay").removeClass("block_overlayBG"),e("#block_overlay").addClass("block_hide"),e("#block_overlay").remove()}),!1)}e.block=function(o,l){e.block.loading(),o.ajax?s(o.ajax,l):o.image?i(o.image,l):o.div?t(o.div,l):e.isFunction(o)?o.call(e):e.block.reveal(o,l)},e.extend(e.block,{settings:{opacity:.5,overlay:!0,loadingImage:"../../assets/ajax-loader.gif",closeImage:"../../assets/regcloselabel.png",imageTypes:["png","jpg","jpeg","gif"],blockHtml:'    <div id="block" style="display:none;">       <div class="popup">         <div class="popcontent">         </div>         <a href="#" class="close"><img src="../../assets/closelabel.png" title="close" class="close_image" /></a>       </div>     </div>'},loading:function(){return o(),1==e("#block .loading").length?!0:(d(),e("#block .popcontent").empty(),e("#block .body").children().hide().end().append('<div class="loading"><img src="'+e.block.settings.loadingImage+'"/></div>'),e("#block").css({top:l()[1]+c()/10,left:e(window).width()/2-205}).show(),e(document).bind("keydown.block",function(o){return 27==o.keyCode&&e.block.close(),!0}),void e(document).trigger("loading.block"))},reveal:function(o,l){e(document).trigger("beforeReveal.block"),l&&e("#block .popcontent").addClass(l),e("#block .popcontent").append(o),e("#block .loading").remove(),e("#block .body").children().fadeIn("normal"),e("#block").css("left",e(window).width()/2-e("#block .popup").width()/2),e(document).trigger("reveal.block").trigger("afterReveal.block")},close:function(){return e(document).trigger("close.block"),!1}}),e.fn.block=function(l){function c(){e.block.loading(!0);var o=this.rel.match(/block/);return o&&(o=o[1]),t(this.href,o),!1}if(0!=e(this).length)return o(l),this.bind("click.block",c)},e(document).bind("close.block",function(){e(document).unbind("keydown.block"),e("#block").fadeOut(function(){e("#block .popcontent").removeClass().addClass("popcontent"),e("#block .loading").remove(),e(document).trigger("afterClose.block")}),r()})}(jQuery);
